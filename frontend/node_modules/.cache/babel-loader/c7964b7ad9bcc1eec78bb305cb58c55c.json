{"ast":null,"code":"import _objectSpread from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/raghav/Documents/cc/masters/mastersfriend/src/components/Account.js\";\nimport React, { Component } from \"react\";\nimport { Button, Form, Alert } from \"reactstrap\";\nimport withAuthorization from \"./withAuthorization\"; //redirects to sign in if user not signed in\n\nimport { auth } from \"../firebase\";\nimport { db } from \"../firebase\";\n\nvar byPropKey = function byPropKey(propertyName, value) {\n  return function () {\n    return _defineProperty({}, propertyName, value);\n  };\n};\n\nvar INITIAL_STATE = {\n  email: \"\",\n  error: null,\n  showingAlert: false,\n  users: null,\n  username: '',\n  loading: true,\n  first_name: '',\n  last_name: '',\n  grade: '',\n  update: 0,\n  gre: '',\n  we: '',\n  toefl: '',\n  resume: '',\n  sop: '',\n  entry: '',\n  uid: '',\n  redirect: null,\n  lor1: '',\n  lor2: '',\n  lor3: '',\n  lor4: '',\n  progresssop: '',\n  progressresume: '',\n  url_resume: '',\n  url_sop: ''\n};\n\nvar AccountPage = /*#__PURE__*/function (_Component) {\n  _inherits(AccountPage, _Component);\n\n  var _super = _createSuper(AccountPage);\n\n  function AccountPage() {\n    var _this;\n\n    _classCallCheck(this, AccountPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = _objectSpread({}, INITIAL_STATE);\n\n    _this.onSubmit = function (event) {\n      var email = _this.state.email;\n      auth.doPasswordReset(email).then(function () {\n        _this.setState(_objectSpread({}, INITIAL_STATE));\n      }).catch(function (error) {\n        _this.setState(byPropKey(\"error\", error));\n\n        _this.timer(); //show alert message for some seconds\n\n      });\n      event.preventDefault();\n      setTimeout(function () {\n        window.location.reload(1);\n      }, 3000);\n    };\n\n    _this.timer = function () {\n      _this.setState({\n        showingAlert: true\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          showingAlert: false\n        });\n      }, 4000);\n    };\n\n    return _this;\n  }\n\n  _createClass(AccountPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var loggedUser = this.props.loggedUser;\n      console.log(loggedUser.uid);\n\n      if (loggedUser) {\n        db.doGetAnUnser(loggedUser.uid).then(function (res) {\n          _this2.setState({\n            username: res.val().username,\n            email: res.val().email,\n            loading: false,\n            uid: loggedUser.uid\n          });\n\n          console.log(res.val());\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          showingAlert = _this$state.showingAlert;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 7\n        }\n      }, showingAlert && /*#__PURE__*/React.createElement(Alert, {\n        color: \"danger\",\n        onLoad: this.timer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, error.message), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, \"Reset Link will be sent to your Email\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, \"Reset My Password\"))));\n    }\n  }]);\n\n  return AccountPage;\n}(Component);\n\nvar authCondition = function authCondition(authUser) {\n  return !!authUser && authUser.providerData[0].providerId !== \"facebook.com\";\n}; //true and false\n\n\nexport default withAuthorization(authCondition)(AccountPage);","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/Account.js"],"names":["React","Component","Button","Form","Alert","withAuthorization","auth","db","byPropKey","propertyName","value","INITIAL_STATE","email","error","showingAlert","users","username","loading","first_name","last_name","grade","update","gre","we","toefl","resume","sop","entry","uid","redirect","lor1","lor2","lor3","lor4","progresssop","progressresume","url_resume","url_sop","AccountPage","state","onSubmit","event","doPasswordReset","then","setState","catch","timer","preventDefault","setTimeout","window","location","reload","loggedUser","props","console","log","doGetAnUnser","res","val","message","authCondition","authUser","providerData","providerId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button, Form, Alert } from \"reactstrap\";\nimport withAuthorization from \"./withAuthorization\"; //redirects to sign in if user not signed in\nimport { auth } from \"../firebase\";\nimport { db } from \"../firebase\";\n\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value\n});\n\nconst INITIAL_STATE = {\n  email: \"\",\n  error: null,\n  showingAlert: false,\n  users: null,\n  username: '',\n  loading: true,\n  first_name: '',\n  last_name: '',\n  grade: '',\n  update: 0,\n  gre: '',\n  we: '',\n  toefl:'',\n  resume: '',\n  sop: '',\n  entry: '',\n  uid: '',\n  redirect: null,\n  lor1: '',\n  lor2: '',\n  lor3: '',\n  lor4: '',\n  progresssop: '',\n  progressresume: '',\n  url_resume: '',\n  url_sop: ''\n};\n\nclass AccountPage extends Component {\n  componentDidMount() {\n\n    const { loggedUser } = this.props;\n    console.log(loggedUser.uid)\n    if(loggedUser)\n    {\n    db.doGetAnUnser(loggedUser.uid).then(res => {\n      this.setState({\n        username: res.val().username,\n        email: res.val().email,\n        loading: false,\n        uid: loggedUser.uid\n      });\n      console.log(res.val())\n     \n    });\n    }\n  }\n\nstate = { ...INITIAL_STATE };\n\n  onSubmit = event => {\n    const email = this.state.email;\n\n    auth\n      .doPasswordReset(email)\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n      })\n      .catch(error => {\n        this.setState(byPropKey(\"error\", error));\n        this.timer(); //show alert message for some seconds\n      });\n    event.preventDefault();\n    setTimeout(function () {\n      window.location.reload(1);\n  }, 3000);  \n  };\n\n  timer = () => {\n    this.setState({\n      showingAlert: true\n    });\n\n    setTimeout(() => {\n      this.setState({\n        showingAlert: false\n      });\n    }, 4000);\n\n  };\n\n  render() {\n    const { error, showingAlert } = this.state;\n\n    return (\n      <div>\n        {showingAlert && (\n          <Alert color=\"danger\" onLoad={this.timer}>\n            {error.message}\n          </Alert>\n        )}\n        <br></br>\n        <h5>Reset Link will be sent to your Email</h5>\n        <br></br>\n        <Form onSubmit={this.onSubmit}>\n          <div className=\"text-center\">\n            <Button type=\"submit\">\n              Reset My Password\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\nconst authCondition = authUser =>\n  !!authUser && authUser.providerData[0].providerId !== \"facebook.com\"; //true and false\n\nexport default withAuthorization(authCondition)(AccountPage);"]},"metadata":{},"sourceType":"module"}