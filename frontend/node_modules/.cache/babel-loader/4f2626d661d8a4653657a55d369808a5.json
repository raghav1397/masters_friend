{"ast":null,"code":"import _objectSpread from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import{Button,Form,FormGroup,Label,Input,Alert}from\"reactstrap\";import*as routes from\"../constants/routes\";import{auth,db}from\"../firebase\";var SignUpPage=function SignUpPage(_ref){var history=_ref.history;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"div-flex\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"centered\"},\"Sign Up\"),/*#__PURE__*/React.createElement(SignUpForm,{history:history}))));};//################### Sign Up Form ###################\nvar INITIAL_STATE={username:\"\",email:\"\",passwordOne:\"\",passwordTwo:\"\",error:null,showingAlert:false};//A Higher order function with prop name as key and the value to be assigned to\nvar byPropKey=function byPropKey(propertyName,value){return function(){return _defineProperty({},propertyName,value);};};var SignUpForm=/*#__PURE__*/function(_Component){_inherits(SignUpForm,_Component);var _super=_createSuper(SignUpForm);function SignUpForm(){var _this;_classCallCheck(this,SignUpForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=_objectSpread({},INITIAL_STATE);_this.onSubmit=function(event){var _this$state=_this.state,username=_this$state.username,email=_this$state.email,passwordOne=_this$state.passwordOne;var history=_this.props.history;console.log(\"raghav12345\");auth.doCreateUserWithEmailAndPassword(email,passwordOne)//it the above functions resolves, reset the state to its initial state values, otherwise, set the error object\n.then(function(authUser){console.log(authUser.uid);//creating a user in the database after the sign up through Firebase auth API\ndb.doCreateUser(authUser.uid,username,email).then(function(){console.log(authUser.uid);_this.setState(_objectSpread({},INITIAL_STATE));history.push(routes.HOME);//redirects to Home Page\n}).catch(function(error){console.log(error);_this.setState(byPropKey(\"error\",error));_this.timer();//show alert message for some seconds\n});}).catch(function(err){_this.setState(byPropKey(\"error\",err));console.log(err);_this.timer();//show alert message for some seconds\n});event.preventDefault();//prevents refreshing\n};_this.timer=function(){_this.setState({showingAlert:true});setTimeout(function(){_this.setState({showingAlert:false});},4000);};return _this;}_createClass(SignUpForm,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,username=_this$state2.username,email=_this$state2.email,passwordOne=_this$state2.passwordOne,passwordTwo=_this$state2.passwordTwo,error=_this$state2.error,showingAlert=_this$state2.showingAlert;//a boolen to perform validation\nvar isInvalid=passwordOne!==passwordTwo||passwordOne===\"\"||email===\"\"||username===\"\";return/*#__PURE__*/React.createElement(\"div\",null,showingAlert&&/*#__PURE__*/React.createElement(Alert,{color:\"danger\",onLoad:this.timer},error.message),/*#__PURE__*/React.createElement(Form,{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"userName\"},\"Full Name\"),/*#__PURE__*/React.createElement(Input,{type:\"username\",name:\"username\",id:\"userName\",placeholder:\"John Doe\",value:username,onChange:function onChange(e){return _this2.setState(byPropKey(\"username\",e.target.value));}})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"exampleEmail\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",id:\"exampleEmail\",placeholder:\"user@gmail.com\",value:email,onChange:function onChange(e){return _this2.setState(byPropKey(\"email\",e.target.value));}})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"examplePassword1\"},\"Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"examplePassword1\",placeholder:\"Password\",value:passwordOne,onChange:function onChange(e){return _this2.setState(byPropKey(\"passwordOne\",e.target.value));}})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"examplePassword2\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"examplePassword2\",placeholder:\"Confirm Password\",value:passwordTwo,onChange:function onChange(e){return _this2.setState(byPropKey(\"passwordTwo\",e.target.value));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{disabled:isInvalid,type:\"submit\"},\"Sign Up\"))));}}]);return SignUpForm;}(Component);//################### Sign Up Link ###################\n//used in the sign in when the user don't have an account registered yet\nvar SignUpLink=function SignUpLink(){return/*#__PURE__*/React.createElement(\"p\",null,\"Don't have an account? \",/*#__PURE__*/React.createElement(Link,{to:routes.SIGN_UP},\"Sign Up\"));};//exports\nexport default withRouter(SignUpPage);//using a HoC to get access to history\nexport{SignUpForm,SignUpLink};","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/SignUp.js"],"names":["React","Component","Link","withRouter","Button","Form","FormGroup","Label","Input","Alert","routes","auth","db","SignUpPage","history","INITIAL_STATE","username","email","passwordOne","passwordTwo","error","showingAlert","byPropKey","propertyName","value","SignUpForm","state","onSubmit","event","props","console","log","doCreateUserWithEmailAndPassword","then","authUser","uid","doCreateUser","setState","push","HOME","catch","timer","err","preventDefault","setTimeout","isInvalid","message","e","target","SignUpLink","SIGN_UP"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Button, Form, FormGroup, Label, Input, Alert } from \"reactstrap\";\n\nimport * as routes from \"../constants/routes\";\nimport { auth, db } from \"../firebase\";\n\nconst SignUpPage = ({ history }) => (\n  <div>\n    <div className=\"div-flex\">\n      <div>\n        <h1 className=\"centered\">Sign Up</h1>\n        <SignUpForm history={history} />\n      </div>\n    </div>\n  </div>\n);\n\n//################### Sign Up Form ###################\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  error: null,\n  showingAlert: false\n};\n\n//A Higher order function with prop name as key and the value to be assigned to\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value\n});\n\nclass SignUpForm extends Component {\n  //defining state\n  state = {\n    ...INITIAL_STATE\n  };\n\n  onSubmit = event => {\n    const { username, email, passwordOne } = this.state;\n    const { history } = this.props;\n    console.log(\"raghav12345\")\n    auth\n      .doCreateUserWithEmailAndPassword(email, passwordOne)\n      //it the above functions resolves, reset the state to its initial state values, otherwise, set the error object\n      .then(authUser => {\n        console.log(authUser.uid)\n        //creating a user in the database after the sign up through Firebase auth API\n        db.doCreateUser(authUser.uid, username, email)\n          .then(() => {\n            console.log(authUser.uid)\n            this.setState({\n              ...INITIAL_STATE\n            });\n            history.push(routes.HOME); //redirects to Home Page\n          })\n          .catch(error => {\n            console.log(error)\n            this.setState(byPropKey(\"error\", error));\n            this.timer(); //show alert message for some seconds\n          });\n      })\n      .catch(err => {\n        this.setState(byPropKey(\"error\", err));\n        console.log(err)\n        this.timer(); //show alert message for some seconds\n      });\n\n    event.preventDefault(); //prevents refreshing\n  };\n\n  timer = () => {\n    this.setState({\n      showingAlert: true\n    });\n\n    setTimeout(() => {\n      this.setState({\n        showingAlert: false\n      });\n    }, 4000);\n  };\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      error,\n      showingAlert\n    } = this.state;\n    //a boolen to perform validation\n    const isInvalid =\n      passwordOne !== passwordTwo ||\n      passwordOne === \"\" ||\n      email === \"\" ||\n      username === \"\";\n\n    return (\n      <div>\n        {showingAlert && (\n          <Alert color=\"danger\" onLoad={this.timer}>\n            {error.message}\n          </Alert>\n        )}\n        <Form onSubmit={this.onSubmit}>\n          <FormGroup>\n            <Label for=\"userName\">Full Name</Label>\n            <Input\n              type=\"username\"\n              name=\"username\"\n              id=\"userName\"\n              placeholder=\"John Doe\"\n              value={username}\n              onChange={e =>\n                this.setState(byPropKey(\"username\", e.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"exampleEmail\">Email</Label>\n            <Input\n              type=\"email\"\n              name=\"email\"\n              id=\"exampleEmail\"\n              placeholder=\"user@gmail.com\"\n              value={email}\n              onChange={e => this.setState(byPropKey(\"email\", e.target.value))}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"examplePassword1\">Password</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"examplePassword1\"\n              placeholder=\"Password\"\n              value={passwordOne}\n              onChange={e =>\n                this.setState(byPropKey(\"passwordOne\", e.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"examplePassword2\">Confirm Password</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"examplePassword2\"\n              placeholder=\"Confirm Password\"\n              value={passwordTwo}\n              onChange={e =>\n                this.setState(byPropKey(\"passwordTwo\", e.target.value))\n              }\n            />\n          </FormGroup>\n\n          <div className=\"text-center\">\n            <Button disabled={isInvalid} type=\"submit\">\n              Sign Up\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\n//################### Sign Up Link ###################\n//used in the sign in when the user don't have an account registered yet\nconst SignUpLink = () => (\n  <p>\n    Don't have an account? <Link to={routes.SIGN_UP}>Sign Up</Link>\n  </p>\n);\n\n//exports\nexport default withRouter(SignUpPage); //using a HoC to get access to history\nexport { SignUpForm, SignUpLink };\n\n"]},"metadata":{},"sourceType":"module"}