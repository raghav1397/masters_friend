{"ast":null,"code":"import _objectSpread from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/src/components/SignUp.js\";\n\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Button, Form, FormGroup, Label, Input, Alert } from \"reactstrap\";\nimport * as routes from \"../constants/routes\";\nimport { auth, db } from \"../firebase\";\n\nvar SignUpPage = function SignUpPage(_ref) {\n  var history = _ref.history;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"div-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"centered\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 9\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(SignUpForm, {\n    history: history,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 9\n    }\n  }))));\n}; //################### Sign Up Form ###################\n\n\nvar INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  error: null,\n  showingAlert: false\n}; //A Higher order function with prop name as key and the value to be assigned to\n\nvar byPropKey = function byPropKey(propertyName, value) {\n  return function () {\n    return _defineProperty({}, propertyName, value);\n  };\n};\n\nvar SignUpForm = /*#__PURE__*/function (_Component) {\n  _inherits(SignUpForm, _Component);\n\n  var _super = _createSuper(SignUpForm);\n\n  function SignUpForm() {\n    var _this2;\n\n    _classCallCheck(this, SignUpForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _super.call.apply(_super, [this].concat(args));\n    _this2.state = _objectSpread({}, INITIAL_STATE);\n\n    _this2.onSubmit = function (event) {\n      var _this2$state = _this2.state,\n          username = _this2$state.username,\n          email = _this2$state.email,\n          passwordOne = _this2$state.passwordOne;\n      var history = _this2.props.history;\n      console.log(\"raghav12345\");\n      auth.doCreateUserWithEmailAndPassword(email, passwordOne) //it the above functions resolves, reset the state to its initial state values, otherwise, set the error object\n      .then(function (authUser) {\n        console.log(authUser.uid); //creating a user in the database after the sign up through Firebase auth API\n\n        db.doCreateUser(authUser.uid, username, email).then(function () {\n          console.log(authUser.uid);\n\n          _this2.setState(_objectSpread({}, INITIAL_STATE));\n\n          history.push(routes.HOME); //redirects to Home Page\n        }).catch(function (error) {\n          console.log(error);\n\n          _this2.setState(byPropKey(\"error\", error));\n\n          _this2.timer(); //show alert message for some seconds\n\n        });\n      }).catch(function (err) {\n        _this2.setState(byPropKey(\"error\", err));\n\n        console.log(err);\n\n        _this2.timer(); //show alert message for some seconds\n\n      });\n      event.preventDefault(); //prevents refreshing\n    };\n\n    _this2.timer = function () {\n      _this2.setState({\n        showingAlert: true\n      });\n\n      setTimeout(function () {\n        _this2.setState({\n          showingAlert: false\n        });\n      }, 4000);\n    };\n\n    return _this2;\n  }\n\n  _createClass(SignUpForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          passwordOne = _this$state.passwordOne,\n          passwordTwo = _this$state.passwordTwo,\n          error = _this$state.error,\n          showingAlert = _this$state.showingAlert; //a boolen to perform validation\n\n      var isInvalid = passwordOne !== passwordTwo || passwordOne === \"\" || email === \"\" || username === \"\";\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 7\n        }\n      }, showingAlert && /*#__PURE__*/React.createElement(Alert, {\n        color: \"danger\",\n        onLoad: this.timer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }, error.message), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"userName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      }, \"Full Name\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"username\",\n        name: \"username\",\n        id: \"userName\",\n        placeholder: \"John Doe\",\n        value: username,\n        onChange: function onChange(e) {\n          return _this3.setState(byPropKey(\"username\", e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"email\",\n        name: \"email\",\n        id: \"exampleEmail\",\n        placeholder: \"user@gmail.com\",\n        value: email,\n        onChange: function onChange(e) {\n          return _this3.setState(byPropKey(\"email\", e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"examplePassword1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        id: \"examplePassword1\",\n        placeholder: \"Password\",\n        value: passwordOne,\n        onChange: function onChange(e) {\n          return _this3.setState(byPropKey(\"passwordOne\", e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"examplePassword2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, \"Confirm Password\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        id: \"examplePassword2\",\n        placeholder: \"Confirm Password\",\n        value: passwordTwo,\n        onChange: function onChange(e) {\n          return _this3.setState(byPropKey(\"passwordTwo\", e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        disabled: isInvalid,\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, \"Sign Up\"))));\n    }\n  }]);\n\n  return SignUpForm;\n}(Component); //################### Sign Up Link ###################\n//used in the sign in when the user don't have an account registered yet\n\n\nvar SignUpLink = function SignUpLink() {\n  return /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 3\n    }\n  }, \"Don't have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: routes.SIGN_UP,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 28\n    }\n  }, \"Sign Up\"));\n}; //exports\n\n\nexport default withRouter(SignUpPage); //using a HoC to get access to history\n\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["/mnt/data/ASU_MS_CS/Spring2020/CSE_545_Cloud_Computing/masters_friend/frontend/src/components/SignUp.js"],"names":["React","Component","Link","withRouter","Button","Form","FormGroup","Label","Input","Alert","routes","auth","db","SignUpPage","history","INITIAL_STATE","username","email","passwordOne","passwordTwo","error","showingAlert","byPropKey","propertyName","value","SignUpForm","state","onSubmit","event","props","console","log","doCreateUserWithEmailAndPassword","then","authUser","uid","doCreateUser","setState","push","HOME","catch","timer","err","preventDefault","setTimeout","isInvalid","message","e","target","SignUpLink","SIGN_UP"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Button, Form, FormGroup, Label, Input, Alert } from \"reactstrap\";\n\nimport * as routes from \"../constants/routes\";\nimport { auth, db } from \"../firebase\";\n\nconst SignUpPage = ({ history }) => (\n  <div>\n    <div className=\"div-flex\">\n      <div>\n        <h1 className=\"centered\">Sign Up</h1>\n        <SignUpForm history={history} />\n      </div>\n    </div>\n  </div>\n);\n\n//################### Sign Up Form ###################\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  error: null,\n  showingAlert: false,\n};\n\n//A Higher order function with prop name as key and the value to be assigned to\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value,\n});\n\nclass SignUpForm extends Component {\n  //defining state\n  state = {\n    ...INITIAL_STATE,\n  };\n\n  onSubmit = (event) => {\n    const { username, email, passwordOne } = this.state;\n    const { history } = this.props;\n    console.log(\"raghav12345\");\n    auth\n      .doCreateUserWithEmailAndPassword(email, passwordOne)\n      //it the above functions resolves, reset the state to its initial state values, otherwise, set the error object\n      .then((authUser) => {\n        console.log(authUser.uid);\n        //creating a user in the database after the sign up through Firebase auth API\n        db.doCreateUser(authUser.uid, username, email)\n          .then(() => {\n            console.log(authUser.uid);\n            this.setState({\n              ...INITIAL_STATE,\n            });\n            history.push(routes.HOME); //redirects to Home Page\n          })\n          .catch((error) => {\n            console.log(error);\n            this.setState(byPropKey(\"error\", error));\n            this.timer(); //show alert message for some seconds\n          });\n      })\n      .catch((err) => {\n        this.setState(byPropKey(\"error\", err));\n        console.log(err);\n        this.timer(); //show alert message for some seconds\n      });\n\n    event.preventDefault(); //prevents refreshing\n  };\n\n  timer = () => {\n    this.setState({\n      showingAlert: true,\n    });\n\n    setTimeout(() => {\n      this.setState({\n        showingAlert: false,\n      });\n    }, 4000);\n  };\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      error,\n      showingAlert,\n    } = this.state;\n    //a boolen to perform validation\n    const isInvalid =\n      passwordOne !== passwordTwo ||\n      passwordOne === \"\" ||\n      email === \"\" ||\n      username === \"\";\n\n    return (\n      <div>\n        {showingAlert && (\n          <Alert color=\"danger\" onLoad={this.timer}>\n            {error.message}\n          </Alert>\n        )}\n        <Form onSubmit={this.onSubmit}>\n          <FormGroup>\n            <Label for=\"userName\">Full Name</Label>\n            <Input\n              type=\"username\"\n              name=\"username\"\n              id=\"userName\"\n              placeholder=\"John Doe\"\n              value={username}\n              onChange={(e) =>\n                this.setState(byPropKey(\"username\", e.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"exampleEmail\">Email</Label>\n            <Input\n              type=\"email\"\n              name=\"email\"\n              id=\"exampleEmail\"\n              placeholder=\"user@gmail.com\"\n              value={email}\n              onChange={(e) =>\n                this.setState(byPropKey(\"email\", e.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"examplePassword1\">Password</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"examplePassword1\"\n              placeholder=\"Password\"\n              value={passwordOne}\n              onChange={(e) =>\n                this.setState(byPropKey(\"passwordOne\", e.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"examplePassword2\">Confirm Password</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"examplePassword2\"\n              placeholder=\"Confirm Password\"\n              value={passwordTwo}\n              onChange={(e) =>\n                this.setState(byPropKey(\"passwordTwo\", e.target.value))\n              }\n            />\n          </FormGroup>\n\n          <div className=\"text-center\">\n            <Button disabled={isInvalid} type=\"submit\">\n              Sign Up\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\n//################### Sign Up Link ###################\n//used in the sign in when the user don't have an account registered yet\nconst SignUpLink = () => (\n  <p>\n    Don't have an account? <Link to={routes.SIGN_UP}>Sign Up</Link>\n  </p>\n);\n\n//exports\nexport default withRouter(SignUpPage); //using a HoC to get access to history\nexport { SignUpForm, SignUpLink };\n"]},"metadata":{},"sourceType":"module"}