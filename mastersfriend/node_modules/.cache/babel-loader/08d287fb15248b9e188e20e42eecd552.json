{"ast":null,"code":"import _classCallCheck from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{withRouter}from\"react-router-dom\";import AuthUserContext from\"./AuthUserContext\";import{firebase}from\"../firebase\";import*as routes from\"../constants/routes\";var withAuthorization=function withAuthorization(authCondition){return function(Component){var WithAuthorization=/*#__PURE__*/function(_React$Component){_inherits(WithAuthorization,_React$Component);var _super=_createSuper(WithAuthorization);function WithAuthorization(){_classCallCheck(this,WithAuthorization);return _super.apply(this,arguments);}_createClass(WithAuthorization,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;firebase.auth.onAuthStateChanged(function(authUser){if(!authCondition(authUser)){//if the authorization fails, redirects to sign in page\n_this.props.history.push(routes.SIGN_IN);}});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(AuthUserContext.Consumer,null,function(authUser){return authUser?/*#__PURE__*/React.createElement(Component,Object.assign({},_this2.props,{loggedUser:authUser})):null;});}}]);return WithAuthorization;}(React.Component);return withRouter(WithAuthorization);//using withRouter so we have access to history props\n};};export default withAuthorization;","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/withAuthorization.js"],"names":["React","withRouter","AuthUserContext","firebase","routes","withAuthorization","authCondition","Component","WithAuthorization","auth","onAuthStateChanged","authUser","props","history","push","SIGN_IN"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAO,GAAKC,CAAAA,MAAZ,KAAwB,qBAAxB,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,aAAa,QAAI,UAAAC,SAAS,CAAI,IAChDC,CAAAA,iBADgD,uUAEhC,gBAClBL,QAAQ,CAACM,IAAT,CAAcC,kBAAd,CAAiC,SAAAC,QAAQ,CAAI,CAC3C,GAAI,CAACL,aAAa,CAACK,QAAD,CAAlB,CAA8B,CAC5B;AACA,KAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBV,MAAM,CAACW,OAA/B,EACD,CACF,CALD,EAMD,CATmD,uCAW3C,iBACP,mBACE,oBAAC,eAAD,CAAiB,QAAjB,MAEG,SAAAJ,QAAQ,QACPA,CAAAA,QAAQ,cACN,oBAAC,SAAD,kBAAe,MAAI,CAACC,KAApB,EAA2B,UAAU,CAAED,QAAvC,GADM,CAEJ,IAHG,EAFX,CADF,CAUD,CAtBmD,+BACtBX,KAAK,CAACO,SADgB,EAyBtD,MAAON,CAAAA,UAAU,CAACO,iBAAD,CAAjB,CAAsC;AACvC,CA1BsC,EAAvC,CA4BA,cAAeH,CAAAA,iBAAf","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport AuthUserContext from \"./AuthUserContext\";\nimport { firebase } from \"../firebase\";\nimport * as routes from \"../constants/routes\";\n\nconst withAuthorization = authCondition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      firebase.auth.onAuthStateChanged(authUser => {\n        if (!authCondition(authUser)) {\n          //if the authorization fails, redirects to sign in page\n          this.props.history.push(routes.SIGN_IN);\n        }\n      });\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {/* it either renders the passed component or not */}\n          {authUser =>\n            authUser ? (\n              <Component {...this.props} loggedUser={authUser} />\n            ) : null\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withRouter(WithAuthorization); //using withRouter so we have access to history props\n};\n\nexport default withAuthorization;\n"]},"metadata":{},"sourceType":"module"}