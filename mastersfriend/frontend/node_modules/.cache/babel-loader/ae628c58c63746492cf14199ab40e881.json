{"ast":null,"code":"import _objectSpread from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{Component}from\"react\";import{Button,Form,Alert}from\"reactstrap\";import withAuthorization from\"./withAuthorization\";//redirects to sign in if user not signed in\nimport{auth}from\"../firebase\";import{db}from\"../firebase\";var byPropKey=function byPropKey(propertyName,value){return function(){return _defineProperty({},propertyName,value);};};var INITIAL_STATE={email:\"\",error:null,showingAlert:false};var AccountPage=/*#__PURE__*/function(_Component){_inherits(AccountPage,_Component);var _super=_createSuper(AccountPage);function AccountPage(){var _this;_classCallCheck(this,AccountPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=_objectSpread({},INITIAL_STATE);_this.onSubmit=function(event){var email=_this.state.email;auth.doPasswordReset(email).then(function(){_this.setState(_objectSpread({},INITIAL_STATE));}).catch(function(error){_this.setState(byPropKey(\"error\",error));_this.timer();//show alert message for some seconds\n});event.preventDefault();setTimeout(function(){window.location.reload(1);},3000);};_this.timer=function(){_this.setState({showingAlert:true});setTimeout(function(){_this.setState({showingAlert:false});},4000);};return _this;}_createClass(AccountPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var loggedUser=this.props.loggedUser;console.log(loggedUser.uid);if(loggedUser){db.doGetAnUnser(loggedUser.uid).then(function(res){_this2.setState({email:res.val().email});console.log(res.val());});}}},{key:\"render\",value:function render(){var _this$state=this.state,error=_this$state.error,showingAlert=_this$state.showingAlert;return/*#__PURE__*/React.createElement(\"div\",null,showingAlert&&/*#__PURE__*/React.createElement(Alert,{color:\"danger\",onLoad:this.timer},error.message),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h5\",null,\"Reset Link will be sent to your Email\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form,{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Reset My Password\"))));}}]);return AccountPage;}(Component);var authCondition=function authCondition(authUser){return!!authUser&&authUser.providerData[0].providerId!==\"facebook.com\";};//true and false\nexport default withAuthorization(authCondition)(AccountPage);","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/Account.js"],"names":["React","Component","Button","Form","Alert","withAuthorization","auth","db","byPropKey","propertyName","value","INITIAL_STATE","email","error","showingAlert","AccountPage","state","onSubmit","event","doPasswordReset","then","setState","catch","timer","preventDefault","setTimeout","window","location","reload","loggedUser","props","console","log","uid","doGetAnUnser","res","val","message","authCondition","authUser","providerData","providerId"],"mappings":"29BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,KAAoC,YAApC,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CAAqD;AACrD,OAASC,IAAT,KAAqB,aAArB,CACA,OAASC,EAAT,KAAmB,aAAnB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,YAAD,CAAeC,KAAf,QAAyB,sCACxCD,YADwC,CACzBC,KADyB,GAAzB,EAAlB,CAIA,GAAMC,CAAAA,aAAa,CAAG,CACpBC,KAAK,CAAE,EADa,CAEpBC,KAAK,CAAE,IAFa,CAGpBC,YAAY,CAAE,KAHM,CAAtB,C,GAMMC,CAAAA,W,+UAiBNC,K,kBAAaL,a,QAEXM,Q,CAAW,SAAAC,KAAK,CAAI,CAClB,GAAMN,CAAAA,KAAK,CAAG,MAAKI,KAAL,CAAWJ,KAAzB,CAEAN,IAAI,CACDa,eADH,CACmBP,KADnB,EAEGQ,IAFH,CAEQ,UAAM,CACV,MAAKC,QAAL,kBAAmBV,aAAnB,GACD,CAJH,EAKGW,KALH,CAKS,SAAAT,KAAK,CAAI,CACd,MAAKQ,QAAL,CAAcb,SAAS,CAAC,OAAD,CAAUK,KAAV,CAAvB,EACA,MAAKU,KAAL,GAAc;AACf,CARH,EASAL,KAAK,CAACM,cAAN,GACAC,UAAU,CAAC,UAAY,CACrBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,CAAvB,EACH,CAFW,CAET,IAFS,CAAV,CAGD,C,OAEDL,K,CAAQ,UAAM,CACZ,MAAKF,QAAL,CAAc,CACZP,YAAY,CAAE,IADF,CAAd,EAIAW,UAAU,CAAC,UAAM,CACf,MAAKJ,QAAL,CAAc,CACZP,YAAY,CAAE,KADF,CAAd,EAGD,CAJS,CAIP,IAJO,CAAV,CAMD,C,oGA/CmB,oBAEVe,CAAAA,UAFU,CAEK,KAAKC,KAFV,CAEVD,UAFU,CAGlBE,OAAO,CAACC,GAAR,CAAYH,UAAU,CAACI,GAAvB,EACA,GAAGJ,UAAH,CACA,CACAtB,EAAE,CAAC2B,YAAH,CAAgBL,UAAU,CAACI,GAA3B,EAAgCb,IAAhC,CAAqC,SAAAe,GAAG,CAAI,CAC1C,MAAI,CAACd,QAAL,CAAc,CACZT,KAAK,CAAEuB,GAAG,CAACC,GAAJ,GAAUxB,KADL,CAAd,EAGAmB,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACC,GAAJ,EAAZ,EAED,CAND,EAOC,CACF,C,uCAmCQ,iBACyB,KAAKpB,KAD9B,CACCH,KADD,aACCA,KADD,CACQC,YADR,aACQA,YADR,CAGP,mBACE,+BACGA,YAAY,eACX,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,CAAsB,MAAM,CAAE,KAAKS,KAAnC,EACGV,KAAK,CAACwB,OADT,CAFJ,cAME,8BANF,cAOE,sEAPF,cAQE,8BARF,cASE,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKpB,QAArB,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,sBADF,CADF,CATF,CADF,CAmBD,C,yBAxEuBhB,S,EA2E1B,GAAMqC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,QAAQ,QAC5B,CAAC,CAACA,QAAF,EAAcA,QAAQ,CAACC,YAAT,CAAsB,CAAtB,EAAyBC,UAAzB,GAAwC,cAD1B,EAA9B,CACwE;AAExE,cAAepC,CAAAA,iBAAiB,CAACiC,aAAD,CAAjB,CAAiCvB,WAAjC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Button, Form, Alert } from \"reactstrap\";\nimport withAuthorization from \"./withAuthorization\"; //redirects to sign in if user not signed in\nimport { auth } from \"../firebase\";\nimport { db } from \"../firebase\";\n\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value\n});\n\nconst INITIAL_STATE = {\n  email: \"\",\n  error: null,\n  showingAlert: false\n};\n\nclass AccountPage extends Component {\n  componentDidMount() {\n\n    const { loggedUser } = this.props;\n    console.log(loggedUser.uid)\n    if(loggedUser)\n    {\n    db.doGetAnUnser(loggedUser.uid).then(res => {\n      this.setState({\n        email: res.val().email\n      });\n      console.log(res.val())\n     \n    });\n    }\n  }\n\nstate = { ...INITIAL_STATE };\n\n  onSubmit = event => {\n    const email = this.state.email;\n\n    auth\n      .doPasswordReset(email)\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n      })\n      .catch(error => {\n        this.setState(byPropKey(\"error\", error));\n        this.timer(); //show alert message for some seconds\n      });\n    event.preventDefault();\n    setTimeout(function () {\n      window.location.reload(1);\n  }, 3000);  \n  };\n\n  timer = () => {\n    this.setState({\n      showingAlert: true\n    });\n\n    setTimeout(() => {\n      this.setState({\n        showingAlert: false\n      });\n    }, 4000);\n\n  };\n\n  render() {\n    const { error, showingAlert } = this.state;\n\n    return (\n      <div>\n        {showingAlert && (\n          <Alert color=\"danger\" onLoad={this.timer}>\n            {error.message}\n          </Alert>\n        )}\n        <br></br>\n        <h5>Reset Link will be sent to your Email</h5>\n        <br></br>\n        <Form onSubmit={this.onSubmit}>\n          <div className=\"text-center\">\n            <Button type=\"submit\">\n              Reset My Password\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\nconst authCondition = authUser =>\n  !!authUser && authUser.providerData[0].providerId !== \"facebook.com\"; //true and false\n\nexport default withAuthorization(authCondition)(AccountPage);"]},"metadata":{},"sourceType":"module"}