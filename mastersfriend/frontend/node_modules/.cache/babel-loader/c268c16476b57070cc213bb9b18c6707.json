{"ast":null,"code":"import _objectSpread from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{Component}from\"react\";import{Button,Form,FormGroup,Label,Input,Alert}from\"reactstrap\";import{GoogleLoginButton}from\"react-social-login-buttons\";import{withRouter}from\"react-router-dom\";import{SignUpLink}from\"./SignUp\";import{PasswordForgetLink}from\"./PasswordForget\";import{auth,db}from\"../firebase\";import*as routes from\"../constants/routes\";var SignInPage=function SignInPage(_ref){var history=_ref.history;return/*#__PURE__*/React.createElement(\"div\",{className:\"div-flex\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"centered\"},\"Sign In\"),/*#__PURE__*/React.createElement(SignInForm,{history:history}),/*#__PURE__*/React.createElement(SignUpLink,null),/*#__PURE__*/React.createElement(PasswordForgetLink,null)));};var byPropKey=function byPropKey(propertyName,value){return function(){return _defineProperty({},propertyName,value);};};var INITIAL_STATE={email:\"\",password:\"\",error:null,showingAlert:false};var SignInForm=/*#__PURE__*/function(_Component){_inherits(SignInForm,_Component);var _super=_createSuper(SignInForm);function SignInForm(){var _this;_classCallCheck(this,SignInForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=_objectSpread({},INITIAL_STATE);_this.onSubmit=function(event){var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var history=_this.props.history;auth.doSignInWithEmailAndPassword(email,password).then(function(){_this.setState(_objectSpread({},INITIAL_STATE));history.push(routes.HOME);}).catch(function(error){_this.setState(byPropKey(\"error\",error));_this.timer();//defined below\n});event.preventDefault();};_this.facebookLogin=function(){var history=_this.props.history;auth.GoogleAuthProvide().then(function(authUser){console.log(\"authUser\",authUser);db.doCreateUser(//store some info from facebook into the firebase db\nauthUser.user.uid,authUser.user.displayName,authUser.user.email).then(function(){// this.setState({\n//   ...INITIAL_STATE\n// });\nhistory.push(routes.HOME);//redirects to Home Page\n}).catch(function(error){_this.setState(byPropKey(\"error\",error));});}).catch(function(error){_this.setState(byPropKey(\"error\",error));});};_this.timer=function(){_this.setState({showingAlert:true});setTimeout(function(){_this.setState({showingAlert:false});},4000);};return _this;}_createClass(SignInForm,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password,error=_this$state2.error,showingAlert=_this$state2.showingAlert;var isInvalid=password===\"\"||email===\"\";return/*#__PURE__*/React.createElement(\"div\",null,showingAlert&&/*#__PURE__*/React.createElement(Alert,{color:\"danger\",onLoad:this.timer},error.message),/*#__PURE__*/React.createElement(Form,{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"exampleEmail\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",id:\"exampleEmail\",placeholder:\"user@gmail.com\",value:email,onChange:function onChange(event){return _this2.setState(byPropKey(\"email\",event.target.value));}})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"examplePassword\"},\"Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"examplePassword\",placeholder:\"pass-test\",value:password,onChange:function onChange(event){return _this2.setState(byPropKey(\"password\",event.target.value));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{disabled:isInvalid,type:\"submit\"},\"Sign In\"))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(GoogleLoginButton,{onClick:this.facebookLogin}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"NOTE: University Suggestor is only accessible by signed in users.\"));}}]);return SignInForm;}(Component);export default withRouter(SignInPage);export{SignInForm};","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/SignIn.js"],"names":["React","Component","Button","Form","FormGroup","Label","Input","Alert","GoogleLoginButton","withRouter","SignUpLink","PasswordForgetLink","auth","db","routes","SignInPage","history","byPropKey","propertyName","value","INITIAL_STATE","email","password","error","showingAlert","SignInForm","state","onSubmit","event","props","doSignInWithEmailAndPassword","then","setState","push","HOME","catch","timer","preventDefault","facebookLogin","GoogleAuthProvide","authUser","console","log","doCreateUser","user","uid","displayName","setTimeout","isInvalid","message","target"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button, Form, FormGroup, Label, Input, Alert } from \"reactstrap\";\nimport {  GoogleLoginButton } from \"react-social-login-buttons\";\n\nimport { withRouter } from \"react-router-dom\";\n\nimport { SignUpLink } from \"./SignUp\";\nimport { PasswordForgetLink } from \"./PasswordForget\";\nimport { auth, db } from \"../firebase\";\nimport * as routes from \"../constants/routes\";\n\nconst SignInPage = ({ history }) => {\n  return (\n    <div className=\"div-flex\">\n      <div>\n        <h1 className=\"centered\">Sign In</h1>\n        {/* <img src={logo} className=\"App-logo\" alt=\"My logo\" /> */}\n\n        <SignInForm history={history} />\n        <SignUpLink />\n        <PasswordForgetLink />\n      </div>\n    </div>\n  );\n};\n\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value\n});\n\nconst INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: null,\n  showingAlert: false\n};\n\nclass SignInForm extends Component {\n  state = { ...INITIAL_STATE };\n\n  onSubmit = event => {\n    const { email, password } = this.state;\n\n    const { history } = this.props;\n\n    auth\n      .doSignInWithEmailAndPassword(email, password)\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n        history.push(routes.HOME);\n      })\n      .catch(error => {\n        this.setState(byPropKey(\"error\", error));\n        this.timer(); //defined below\n      });\n\n    event.preventDefault();\n  };\n\n  facebookLogin = () => {\n    const { history } = this.props;\n    auth\n      .GoogleAuthProvide()\n      .then(authUser => {\n        console.log(\"authUser\", authUser);\n\n        db.doCreateUser(\n          //store some info from facebook into the firebase db\n          authUser.user.uid,\n          authUser.user.displayName,\n          authUser.user.email\n        )\n          .then(() => {\n            // this.setState({\n            //   ...INITIAL_STATE\n            // });\n            history.push(routes.HOME); //redirects to Home Page\n          })\n          .catch(error => {\n            this.setState(byPropKey(\"error\", error));\n          });\n      })\n      .catch(error => {\n        this.setState(byPropKey(\"error\", error));\n      });\n  };\n\n  timer = () => {\n    this.setState({\n      showingAlert: true\n    });\n\n    setTimeout(() => {\n      this.setState({\n        showingAlert: false\n      });\n    }, 4000);\n  };\n\n\n  render() {\n    const { email, password, error, showingAlert } = this.state;\n\n    const isInvalid = password === \"\" || email === \"\";\n\n    return (\n      <div>\n        {showingAlert && (\n          <Alert color=\"danger\" onLoad={this.timer}>\n            {error.message}\n          </Alert>\n        )}\n\n        <Form onSubmit={this.onSubmit}>\n          <FormGroup>\n            <Label for=\"exampleEmail\">Email</Label>\n            <Input\n              type=\"email\"\n              name=\"email\"\n              id=\"exampleEmail\"\n              placeholder=\"user@gmail.com\"\n              value={email}\n              onChange={event =>\n                this.setState(byPropKey(\"email\", event.target.value))\n              }\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"examplePassword\">Password</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"examplePassword\"\n              placeholder=\"pass-test\"\n              value={password}\n              onChange={event =>\n                this.setState(byPropKey(\"password\", event.target.value))\n              }\n            />\n          </FormGroup>\n\n          <div className=\"text-center\">\n            <Button disabled={isInvalid} type=\"submit\">\n              Sign In\n            </Button>\n          </div>\n        </Form>\n\n        <hr />\n\n        <GoogleLoginButton onClick={this.facebookLogin} />\n        <br></br>\n        <p>\n          NOTE: University Suggestor is only accessible by signed in users.\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SignInPage);\n\nexport { SignInForm };\n\n"]},"metadata":{},"sourceType":"module"}