{"ast":null,"code":"import _classCallCheck from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/raghav/Documents/cc/masters/mastersfriend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/raghav/Documents/cc/masters/mastersfriend/src/components/withAuthorization.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport AuthUserContext from \"./AuthUserContext\";\nimport { firebase } from \"../firebase\";\nimport * as routes from \"../constants/routes\";\n\nvar withAuthorization = function withAuthorization(authCondition) {\n  return function (Component) {\n    var WithAuthorization = /*#__PURE__*/function (_React$Component) {\n      _inherits(WithAuthorization, _React$Component);\n\n      var _super = _createSuper(WithAuthorization);\n\n      function WithAuthorization() {\n        _classCallCheck(this, WithAuthorization);\n\n        return _super.apply(this, arguments);\n      }\n\n      _createClass(WithAuthorization, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this = this;\n\n          firebase.auth.onAuthStateChanged(function (authUser) {\n            if (!authCondition(authUser)) {\n              //if the authorization fails, redirects to sign in page\n              _this.props.history.push(routes.SIGN_IN);\n            }\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return /*#__PURE__*/React.createElement(AuthUserContext.Consumer, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 21,\n              columnNumber: 9\n            }\n          }, function (authUser) {\n            return authUser ? /*#__PURE__*/React.createElement(Component, Object.assign({}, _this2.props, {\n              loggedUser: authUser,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 25,\n                columnNumber: 15\n              }\n            })) : null;\n          });\n        }\n      }]);\n\n      return WithAuthorization;\n    }(React.Component);\n\n    return withRouter(WithAuthorization); //using withRouter so we have access to history props\n  };\n};\n\nexport default withAuthorization;","map":{"version":3,"sources":["/Users/raghav/Documents/cc/masters/mastersfriend/src/components/withAuthorization.js"],"names":["React","withRouter","AuthUserContext","firebase","routes","withAuthorization","authCondition","Component","WithAuthorization","auth","onAuthStateChanged","authUser","props","history","push","SIGN_IN"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAO,KAAKC,MAAZ,MAAwB,qBAAxB;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,aAAa;AAAA,SAAI,UAAAC,SAAS,EAAI;AAAA,QAChDC,iBADgD;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAEhC;AAAA;;AAClBL,UAAAA,QAAQ,CAACM,IAAT,CAAcC,kBAAd,CAAiC,UAAAC,QAAQ,EAAI;AAC3C,gBAAI,CAACL,aAAa,CAACK,QAAD,CAAlB,EAA8B;AAC5B;AACA,cAAA,KAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBV,MAAM,CAACW,OAA/B;AACD;AACF,WALD;AAMD;AATmD;AAAA;AAAA,iCAW3C;AAAA;;AACP,8BACE,oBAAC,eAAD,CAAiB,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEG,UAAAJ,QAAQ;AAAA,mBACPA,QAAQ,gBACN,oBAAC,SAAD,oBAAe,MAAI,CAACC,KAApB;AAA2B,cAAA,UAAU,EAAED,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADM,GAEJ,IAHG;AAAA,WAFX,CADF;AAUD;AAtBmD;;AAAA;AAAA,MACtBX,KAAK,CAACO,SADgB;;AAyBtD,WAAON,UAAU,CAACO,iBAAD,CAAjB,CAzBsD,CAyBhB;AACvC,GA1BsC;AAAA,CAAvC;;AA4BA,eAAeH,iBAAf","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport AuthUserContext from \"./AuthUserContext\";\nimport { firebase } from \"../firebase\";\nimport * as routes from \"../constants/routes\";\n\nconst withAuthorization = authCondition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      firebase.auth.onAuthStateChanged(authUser => {\n        if (!authCondition(authUser)) {\n          //if the authorization fails, redirects to sign in page\n          this.props.history.push(routes.SIGN_IN);\n        }\n      });\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {/* it either renders the passed component or not */}\n          {authUser =>\n            authUser ? (\n              <Component {...this.props} loggedUser={authUser} />\n            ) : null\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withRouter(WithAuthorization); //using withRouter so we have access to history props\n};\n\nexport default withAuthorization;\n"]},"metadata":{},"sourceType":"module"}